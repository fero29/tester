<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tester - InteligentnÃ© testovanie</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="app-header">
            <h1 onclick="backToList()" style="cursor: pointer;" title="SpÃ¤Å¥ na hlavnÃº strÃ¡nku">AI Tester</h1>
            <span class="version-badge" onclick="showVersionInfo()" style="cursor: pointer;" title="Kliknite pre info">v1.3.22</span>
        </div>

        <!-- Zoznam testov -->
        <div class="section">
            <div class="test-header-controls">
                <h2>DostupnÃ© testy</h2>
                <div>
                    <button onclick="showHelpPage()" class="btn-info btn-small">ğŸ“– NÃ¡vod</button>
                    <button onclick="showImportPage()" class="btn-import btn-small">ğŸ“ Import testov</button>
                    <button onclick="showAIImportPage()" class="btn-ai-import btn-small">ğŸ¤– AI Import</button>
                    <button onclick="startMultipleTests()" class="btn-multi" id="startMultiBtn" style="display: none;">
                        SpustiÅ¥ vybranÃ© testy
                    </button>
                    <button onclick="clearStatistics()" class="btn-danger btn-small">VymazaÅ¥ Å¡tatistiky</button>
                </div>
            </div>
            <div id="testList"></div>
        </div>

        <!-- Verzia Info -->
        <div id="versionPage" style="display: none;">
            <h2>â„¹ï¸ AI Tester v1.3.22</h2>

            <div class="help-section">
                <h3>ğŸ¯ HlavnÃ© funkcie</h3>
                <ul>
                    <li><strong>ğŸ¤– AI Import otÃ¡zok z fotky</strong> - OdfotiÅ¥ otÃ¡zky a AI ich automaticky rozpoznÃ¡</li>
                    <li><strong>ğŸ”¬ PokroÄilÃ© predspracovanie</strong> - OpenCV algoritmy pre Äiernobiele s vysokÃ½m kontrastom</li>
                    <li><strong>ğŸ“¸ VÃ½rezy otÃ¡zok</strong> - KaÅ¾dÃ¡ otÃ¡zka mÃ¡ svoj vÃ½rez z fotky pre kontrolu</li>
                    <li><strong>âœï¸ Editor testov</strong> - Ãšprava existujÃºcich testov priamo v aplikÃ¡cii</li>
                    <li><strong>âœ… Viacero sprÃ¡vnych odpovedÃ­</strong> - Podpora otÃ¡zok s viacerÃ½mi sprÃ¡vnymi odpoveÄami</li>
                    <li><strong>ğŸ“Š Å tatistiky</strong> - Sledovanie vÃ½sledkov, priemernej ÃºspeÅ¡nosti</li>
                    <li><strong>â±ï¸ ÄŒasovÃ½ limit</strong> - 20/30/60 minÃºt alebo bez limitu</li>
                    <li><strong>ğŸ² Mixovanie otÃ¡zok</strong> - NÃ¡hodnÃ© poradie pre lepÅ¡iu prax</li>
                    <li><strong>ğŸ“š ReÅ¾im uÄenia</strong> - Prezeranie vÅ¡etkÃ½ch otÃ¡zok so sprÃ¡vnymi odpoveÄami</li>
                    <li><strong>ğŸ”„ ZluÄovanie testov</strong> - MoÅ¾nosÅ¥ absolvovaÅ¥ viac testov naraz</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ†• Novinky v1.3.22</h3>
                <ul>
                    <li>ğŸ”„ <strong>NovÃ½ reÅ¾im: OpakovaÅ¥ nesprÃ¡vne otÃ¡zky</strong> - NesprÃ¡vne odpovede sa automaticky opakujÃº aÅ¾ kÃ½m neodpoviete sprÃ¡vne</li>
                    <li>âŒ <strong>OdstrÃ¡nenÃ© "NezobrazovaÅ¥ odpovede"</strong> - ZbytoÄnÃ¡ moÅ¾nosÅ¥ bola vymazanÃ¡</li>
                    <li>âœ… <strong>PredvolenÃ© zobrazenie po kaÅ¾dej otÃ¡zke</strong> - LepÅ¡ia predvolenÃ¡ voÄ¾ba pre uÄenie</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.21</h3>
                <ul>
                    <li>ğŸ“š <strong>Zoznam testov pri importe</strong> - Zobrazuje vÅ¡etky testy v prieÄinku s nÃ¡zvom a poÄtom otÃ¡zok</li>
                    <li>ğŸ‘€ <strong>PrehÄ¾ad existujÃºcich testov</strong> - Pri otvorenÃ­ "ğŸ“ Import testov" vidÃ­te Äo uÅ¾ mÃ¡te</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.20</h3>
                <ul>
                    <li>ğŸ’¾ <strong>Oprava importu testov</strong> - NahranÃ© testy sa teraz ukladajÃº do prieÄinka testy/ a zostanÃº tam trvale</li>
                    <li>ğŸ“ <strong>TrvalÃ© uloÅ¾enie</strong> - Import cez "ğŸ“ Import testov" teraz funguje sprÃ¡vne</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.19</h3>
                <ul>
                    <li>âœï¸ <strong>ManuÃ¡lne zadÃ¡vanie nÃ¡zvu</strong> - Pri AI importe pouÅ¾Ã­vateÄ¾ sÃ¡m zadÃ¡va nÃ¡zov a popis testu</li>
                    <li>ğŸš« <strong>OdstrÃ¡nenÃ© automatickÃ© nÃ¡vrhy</strong> - UÅ¾ sa nezobrazujÃº navrhovanÃ© nÃ¡zvy od AI</li>
                    <li>ğŸ› <strong>Oprava chyby</strong> - VyrieÅ¡enÃ½ problÃ©m "Cannot set properties of null" pri AI importe</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.18</h3>
                <ul>
                    <li>âš¡ <strong>AutomatickÃ© naÄÃ­tanie testov</strong> - Testy sa naÄÃ­tajÃº automaticky pri otvorenÃ­ aplikÃ¡cie</li>
                    <li>âŒ <strong>OdstrÃ¡nenÃ© tlaÄidlo "Automaticky naÄÃ­taÅ¥"</strong> - UÅ¾ nie je potrebnÃ©</li>
                    <li>ğŸ’¾ <strong>Autosave pri Ãºprave testov</strong> - Zmeny sa automaticky ukladajÃº po 1 sekunde od poslednej Ãºpravy</li>
                    <li>ğŸ“ <strong>AutomatickÃ© vytvorenie prieÄinka testy/</strong> - VytvorÃ­ sa ak neexistuje</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.17</h3>
                <ul>
                    <li>ğŸ“ <strong>AutomatickÃ© premenovanie sÃºboru</strong> - Pri zmene nÃ¡zvu testu sa automaticky premenuje aj sÃºbor</li>
                    <li>ğŸ›¡ï¸ <strong>Testy nie sÃº v git</strong> - PrieÄinok testy/ je pridanÃ½ do .gitignore, vaÅ¡e testy sa neprepÃ­Å¡u pri update</li>
                    <li>ğŸ’¾ <strong>LokÃ¡lne ukladanie</strong> - VÅ¡etky zmeny testov sa ukladajÃº len lokÃ¡lne</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.16</h3>
                <ul>
                    <li>âœ… <strong>OpravenÃ© pridÃ¡vanie do existujÃºceho testu</strong> - OtÃ¡zky sa teraz sprÃ¡vne pridajÃº do vybranÃ©ho testu</li>
                    <li>ğŸ”§ <strong>ZjednoduÅ¡enÃ¡ logika</strong> - Pri vÃ½bere "PridaÅ¥ do existujÃºceho" sa otÃ¡zky vÅ¾dy pridajÃº bez kontroly nÃ¡zvu</li>
                    <li>ğŸ“Š <strong>LepÅ¡ie logovanie</strong> - Server loguje koÄ¾ko otÃ¡zok bolo pridanÃ½ch</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.14</h3>
                <ul>
                    <li>ğŸ¯ <strong>OpravenÃ½ layout pri otoÄenÃ½ch obrÃ¡zkoch</strong> - TlaÄidlo rotÃ¡cie je teraz vÅ¾dy dostupnÃ© aj pri otoÄenom obrÃ¡zku na vÃ½Å¡ku</li>
                    <li>ğŸ“ <strong>RezervovanÃ½ priestor pre nÃ¡hÄ¾ady</strong> - MinimÃ¡lna vÃ½Å¡ka 200px predchÃ¡dza prekrÃ½vaniu tlaÄidiel</li>
                    <li>âœ¨ <strong>VycentrovanÃ© obrÃ¡zky</strong> - ObrÃ¡zky sÃº automaticky centrovanÃ© v kontajneri</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.13</h3>
                <ul>
                    <li>ğŸ”„ <strong>ZjednoduÅ¡enÃ¡ rotÃ¡cia</strong> - Iba 1 tlaÄidlo (â†·) namiesto 3, stlaÄte 3x pre rotÃ¡ciu o 270Â°</li>
                    <li>ğŸ“Š <strong>Progress pri spÃ¡janÃ­ fotiek</strong> - Zobrazuje sa "Pripravujem fotku 1/5...", "2/5..." pri viacerÃ½ch fotkÃ¡ch</li>
                    <li>âš¡ <strong>LepÅ¡ia spÃ¤tnÃ¡ vÃ¤zba</strong> - VidÃ­te presnÃ½ priebeh spracovania kaÅ¾dej fotky</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.12</h3>
                <ul>
                    <li>ğŸ¯ <strong>PrispÃ´sobenie pre OpenAI API limity</strong> - SpojenÃ© fotky sa automaticky zmenia na max 2048px (dlhÅ¡Ã­ rozmer)</li>
                    <li>âš¡ <strong>OpravenÃ¡ chyba pri viacerÃ½ch fotkÃ¡ch</strong> - JSON parse error pri 5+ fotkÃ¡ch je vyrieÅ¡enÃ½</li>
                    <li>âœ… <strong>JednotlivÃ© fotky zostÃ¡vajÃº v plnej kvalite</strong> - Resize sa aplikuje len na spojenÃ© viacero fotiek</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.9</h3>
                <ul>
                    <li>ğŸ–¼ï¸ <strong>Bez zmeny veÄ¾kosti fotiek</strong> - Fotky sa uÅ¾ nezmenÅ¡ujÃº, zachovÃ¡va sa pÃ´vodnÃ¡ kvalita a rozlÃ­Å¡enie</li>
                    <li>âœ¨ <strong>VysokÃ¡ kvalita JPEG (92%)</strong> - Len optimalizÃ¡cia bez straty detailov</li>
                    <li>ğŸ“ <strong>SprÃ¡vne rozmery pri spojenÃ­</strong> - OpravenÃ½ vÃ½poÄet rozmerov pri spojenÃ­ viacerÃ½ch fotiek</li>
                    <li>ğŸ¯ <strong>LepÅ¡ie AI rozpoznÃ¡vanie</strong> - VÄaka plnÃ©mu rozlÃ­Å¡eniu AI vidÃ­ vÅ¡etky detaily</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.8</h3>
                <ul>
                    <li>ğŸ“¸ <strong>Spojenie viacerÃ½ch fotiek do jednej</strong> - Pri nahranÃ­ viacerÃ½ch fotiek sa automaticky spoja vertikÃ¡lne do jednÃ©ho obrÃ¡zka</li>
                    <li>âš¡ <strong>Jeden AI request namiesto viacerÃ½ch</strong> - VÅ¡etky otÃ¡zky sa spracujÃº naraz, bez potreby posielaÅ¥ viac requestov</li>
                    <li>ğŸ”„ <strong>RotÃ¡cia sa aplikuje pred spojenÃ­m</strong> - KaÅ¾dÃ¡ fotka sa najprv otoÄÃ­ podÄ¾a nastavenia a potom sa spoja</li>
                    <li>âœ… <strong>OpravenÃ½ bug</strong> - VÅ¡etky otÃ¡zky z viacerÃ½ch fotiek sa teraz sprÃ¡vne importujÃº</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.7</h3>
                <ul>
                    <li>ğŸ—œï¸ <strong>AutomatickÃ¡ kompresia obrÃ¡zkov</strong> - Fotky sa automaticky zmenÅ¡ujÃº a komprimujÃº pred uploadom (max 2000px, kvalita 80%)</li>
                    <li>âš¡ <strong>RÃ½chlejÅ¡Ã­ upload</strong> - MenÅ¡ie sÃºbory = rÃ½chlejÅ¡ie nahrÃ¡vanie aj s pomalÅ¡Ã­m internetom</li>
                    <li>ğŸ’¾ <strong>Ãšspora bandwidth</strong> - KomprimovanÃ© obrÃ¡zky majÃº podstatne menÅ¡iu veÄ¾kosÅ¥ (Äasto 5-10x menÅ¡ie)</li>
                    <li>ğŸ“Š <strong>ZvÃ½Å¡enÃ½ upload limit</strong> - Nginx teraz podporuje sÃºbory do 100MB</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.6</h3>
                <ul>
                    <li>ğŸ¨ <strong>ZjednoduÅ¡enÃ© AI import zobrazenie</strong> - OdstrÃ¡nenÃ© pÃ´vodnÃ© fotky a vÃ½rezy otÃ¡zok pre ÄistejÅ¡ie rozhranie</li>
                    <li>ğŸ“Š <strong>Jedno scrollovateÄ¾nÃ© okno pre predspracovanÃº fotku</strong> - LepÅ¡Ã­ prehÄ¾ad toho, Äo AI videlo (max. vÃ½Å¡ka 500px)</li>
                    <li>âœ¨ <strong>PrehÄ¾adnejÅ¡ia editÃ¡cia otÃ¡zok</strong> - OtÃ¡zky bez ruÅ¡ivÃ½ch vÃ½rezov, iba ÄistÃ½ text a odpovede</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.5</h3>
                <ul>
                    <li>âŒ <strong>TlaÄidlo "ZruÅ¡iÅ¥" vo vÅ¡etkÃ½ch krokoch AI importu</strong> - KedykoÄ¾vek mÃ´Å¾ete zruÅ¡iÅ¥ import (pri nahrÃ¡vanÃ­, poÄas spracovania, pri editÃ¡cii aj ukladanÃ­)</li>
                    <li>ğŸšª <strong>JednoduchÃ½ nÃ¡vrat</strong> - RÃ½chle zruÅ¡enie importu a nÃ¡vrat na zaÄiatok v kaÅ¾dom kroku procesu</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.4</h3>
                <ul>
                    <li>â˜‘ <strong>VÅ¾dy moÅ¾nosÅ¥ vÃ½beru viacerÃ½ch odpovedÃ­</strong> - VÅ¡etky odpovede fungujÃº ako checkboxy, dÃ¡ sa oznaÄiÅ¥ aj viac odpovedÃ­</li>
                    <li>ğŸ¯ <strong>FlexibilnÃ© testovanie</strong> - Aj pri otÃ¡zkach s 1 sprÃ¡vnou odpoveÄou mÃ´Å¾ete vyskÃºÅ¡aÅ¥ oznaÄiÅ¥ viac moÅ¾nostÃ­</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.3</h3>
                <ul>
                    <li>ğŸ¨ <strong>ÄŒistejÅ¡ie pouÅ¾Ã­vateÄ¾skÃ© rozhranie</strong> - OdstrÃ¡nenÃ© ruÅ¡ivÃ© varovania pri otÃ¡zkach s viacerÃ½mi sprÃ¡vnymi odpoveÄami</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.2</h3>
                <ul>
                    <li>âŒ <strong>TlaÄidlo "ZruÅ¡iÅ¥ import"</strong> - MoÅ¾nosÅ¥ zruÅ¡iÅ¥ AI import a vrÃ¡tiÅ¥ sa na zaÄiatok</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.1</h3>
                <ul>
                    <li>ğŸ› <strong>Oprava localStorage quota exceeded</strong> - NeukladajÃº sa base64 obrÃ¡zky, len text otÃ¡zok</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.3.0</h3>
                <ul>
                    <li>ğŸ”„ <strong>ManuÃ¡lna rotÃ¡cia fotiek</strong> - TlaÄidlÃ¡ na otÃ¡Äanie kaÅ¾dej fotky (â†¶ 90Â° vÄ¾avo, â†· 90Â° vpravo, 180Â°)</li>
                    <li>ğŸ“ <strong>PerspektÃ­vna korekcia (deskew)</strong> - Automaticky opravÃ­ fotky fotenÃ© z uhla pomocou detekcie hrÃ¡n</li>
                    <li>ğŸ§¹ <strong>VylepÅ¡enÃ© odstrÃ¡nenie Å¡umu</strong> - SilnejÅ¡Ã­ denoising (h=15) + bilateral filter pre ÄistejÅ¡Ã­ vÃ½sledok</li>
                    <li>ğŸ’¾ <strong>Perzistencia AI importu</strong> - Stav sa ukladÃ¡ do localStorage, mÃ´Å¾ete sa prekliknÃºÅ¥ a vrÃ¡tiÅ¥ spÃ¤Å¥</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.2.0</h3>
                <ul>
                    <li>ğŸ¯ <strong>InteligentnÃ© vÃ½rezy otÃ¡zok</strong> - AI teraz detekuje presnÃº pozÃ­ciu kaÅ¾dej otÃ¡zky na fotke</li>
                    <li>ğŸ“ <strong>RieÅ¡enie problÃ©mu s logom/obrÃ¡zkami</strong> - VÃ½rezy sprÃ¡vne sedia aj keÄ je na fotke logo, obrÃ¡zok alebo prÃ¡zdne miesto</li>
                    <li>ğŸ“ <strong>VÃ¤ÄÅ¡ie zobrazenie vÃ½rezov</strong> - ZvÃ¤ÄÅ¡enÃ© vÃ½rezy pre lepÅ¡iu ÄitateÄ¾nosÅ¥ (min-height: 200px)</li>
                    <li>ğŸ”§ <strong>Fallback mechanizmus</strong> - Ak AI neposkytne pozÃ­cie, pouÅ¾ije sa rovnomernÃ© delenie</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>Novinky v1.1.0</h3>
                <ul>
                    <li>ğŸ”¬ <strong>PokroÄilÃ© predspracovanie OpenCV</strong> - CLAHE, denoising, adaptÃ­vny threshold, morfologickÃ© operÃ¡cie</li>
                    <li>ğŸ“¸ <strong>VÃ½rezy otÃ¡zok</strong> - Nad kaÅ¾dou otÃ¡zkou sa zobrazÃ­ vÃ½rez z predspracovanej fotky</li>
                    <li>ğŸ‘ï¸ <strong>Porovnanie obrÃ¡zkov</strong> - VedÄ¾a seba: predspracovanÃ½ vs pÃ´vodnÃ½</li>
                    <li>ğŸ“· <strong>Viacero fotiek naraz</strong> - Import viacerÃ½ch obrÃ¡zkov sÃºÄasne</li>
                    <li>ğŸ”„ <strong>AutomatickÃ© otoÄenie</strong> - EXIF orientÃ¡cia (fotky z mobilu)</li>
                    <li>ğŸ¯ <strong>High detail API</strong> - LepÅ¡ia presnosÅ¥ rozpoznÃ¡vania s GPT-4o</li>
                    <li>ğŸ  <strong>KlikateÄ¾nÃ© logo</strong> - NÃ¡vrat na hlavnÃº strÃ¡nku</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ¤– AI Import - Ako to funguje?</h3>
                <ol>
                    <li>OdfotiÅ¥ alebo nahraÅ¥ fotku s otÃ¡zkami</li>
                    <li>ObrÃ¡zok sa automaticky predspracuje (ostrosÅ¥, kontrast, jas)</li>
                    <li>AI (GPT-4o) analyzuje obrÃ¡zok a rozpoznÃ¡:
                        <ul>
                            <li>Text otÃ¡zok a odpovedÃ­</li>
                            <li>ZakrÃºÅ¾kovanÃ© odpovede</li>
                            <li>PodÄiarknutÃ½, tuÄnÃ½ alebo zvÃ½raznenÃ½ text</li>
                            <li>Checkmarky a hviezdiÄky</li>
                        </ul>
                    </li>
                    <li>Skontrolujete a upravÃ­te vÃ½sledok</li>
                    <li>UloÅ¾Ã­te ako novÃ½ test alebo pridÃ¡te k existujÃºcemu</li>
                </ol>
            </div>

            <div class="help-section">
                <h3>ğŸ’¡ Tipy na lepÅ¡ie vÃ½sledky</h3>
                <ul>
                    <li>Urobte ostrÃº fotografiu s dobrÃ½m osvetlenÃ­m</li>
                    <li>SprÃ¡vne odpovede jasne zakrÃºÅ¾kujte alebo podÄiarknite</li>
                    <li>Text by mal byÅ¥ ÄitateÄ¾nÃ½ a nezmazanÃ½</li>
                    <li>Vyhnite sa tieÅˆom a odleskom</li>
                </ul>
            </div>

            <button onclick="backToList()" class="btn-secondary">â† SpÃ¤Å¥ na zoznam testov</button>
        </div>

        <!-- NÃ¡vod -->
        <div id="helpPage" style="display: none;">
            <h2>ğŸ“– NÃ¡vod na pouÅ¾itie</h2>

            <div class="help-section">
                <h3>NaÄÃ­tanie testov</h3>
                <p><strong>SpÃ´sob 1: AutomatickÃ© naÄÃ­tanie (odporÃºÄanÃ©)</strong></p>
                <ol>
                    <li>VloÅ¾te JSON sÃºbory s testami do prieÄinka <code>testy/</code></li>
                    <li>Testy sa automaticky naÄÃ­tajÃº pri otvorenÃ­ aplikÃ¡cie</li>
                    <li>Nie je potrebnÃ© Å¾iadne tlaÄidlo - staÄÃ­ obnoviÅ¥ strÃ¡nku</li>
                </ol>

                <p><strong>SpÃ´sob 2: ManuÃ¡lne nahratie</strong></p>
                <ol>
                    <li>Kliknite na "ğŸ“ Import testov"</li>
                    <li>Vyberte JSON sÃºbor z vÃ¡Å¡ho poÄÃ­taÄa</li>
                    <li>Kliknite na "ğŸ“¤ NahraÅ¥ sÃºbor"</li>
                </ol>
            </div>

            <div class="help-section">
                <h3>Absolvovanie testu</h3>
                <ol>
                    <li>Vyberte test zo zoznamu (zobrazÃ­ sa dialÃ³g s nastaveniami)</li>
                    <li>Nastavte parametre:
                        <ul>
                            <li><strong>ÄŒasovÃ½ limit:</strong> 20/30/60 minÃºt alebo bez limitu</li>
                            <li><strong>Rozsah otÃ¡zok:</strong> Vyberte od-do ktorej otÃ¡zky chcete absolvovaÅ¥</li>
                            <li><strong>Poradie:</strong> Po poradÃ­ alebo zamixovanÃ©</li>
                            <li><strong>Zobrazenie odpovedÃ­:</strong> Po kaÅ¾dej otÃ¡zke / Na konci testu / OpakovaÅ¥ nesprÃ¡vne</li>
                        </ul>
                    </li>
                    <li>Kliknite na "SpustiÅ¥ test" alebo "ReÅ¾im uÄenia"</li>
                    <li>Absolvujte test a pozrite si vÃ½sledky</li>
                </ol>
            </div>

            <div class="help-section">
                <h3>ÄalÅ¡ie funkcie</h3>
                <ul>
                    <li><strong>Viacero testov naraz:</strong> ZaÅ¡krtnite checkboxy pri testoch a kliknite "SpustiÅ¥ vybranÃ© testy"</li>
                    <li><strong>Å tatistiky:</strong> Pri kaÅ¾dom teste sa zobrazujÃº (poÄet absolvovanÃ­, poslednÃ½ vÃ½sledok, priemer)</li>
                    <li><strong>ReÅ¾im uÄenia:</strong> ZobrazÃ­ celÃ½ test so sprÃ¡vnymi odpoveÄami - vhodnÃ© na uÄenie</li>
                    <li><strong>Zobrazenie po kaÅ¾dej otÃ¡zke:</strong> IhneÄ po odpovedi uvidÃ­te sprÃ¡vne/nesprÃ¡vne odpovede</li>
                    <li><strong>Zobrazenie na konci:</strong> Po skonÄenÃ­ testu uvidÃ­te vÅ¡etky sprÃ¡vne odpovede</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>FormÃ¡t JSON sÃºboru</h3>
                <p>Pre vytvorenie vlastnÃ½ch testov pouÅ¾ite tento formÃ¡t:</p>
                <pre><code>[
  {
    "title": "NÃ¡zov testu",
    "description": "Popis testu",
    "questions": [
      {
        "question": "OtÃ¡zka s jednou sprÃ¡vnou odpoveÄou?",
        "answers": ["OdpoveÄ 1", "OdpoveÄ 2", "OdpoveÄ 3"],
        "correct": 0
      },
      {
        "question": "OtÃ¡zka s viacerÃ½mi sprÃ¡vnymi odpoveÄami?",
        "answers": ["OdpoveÄ A", "OdpoveÄ B", "OdpoveÄ C"],
        "correct": [0, 2]
      }
    ]
  }
]</code></pre>
                <p><strong>PravidlÃ¡:</strong></p>
                <ul>
                    <li><code>correct</code> mÃ´Å¾e byÅ¥ jedno ÄÃ­slo (jedna sprÃ¡vna) alebo pole ÄÃ­sel (viac sprÃ¡vnych)</li>
                    <li>Index zaÄÃ­na od 0 (0 = prvÃ¡ odpoveÄ, 1 = druhÃ¡, atÄ.)</li>
                    <li>Pri viacerÃ½ch sprÃ¡vnych musÃ­te vybraÅ¥ vÅ¡etky</li>
                </ul>
            </div>

            <button onclick="backToList()" class="btn-secondary">â† SpÃ¤Å¥ na zoznam testov</button>
        </div>

        <!-- Import testov -->
        <div id="importPage" style="display: none;">
            <h2>Import testov</h2>

            <div class="import-section">
                <h3>NaÄÃ­tanie z prieÄinka <code>testy/</code></h3>
                <p class="import-info">Testy sa automaticky naÄÃ­tajÃº z prieÄinka <code>testy/</code></p>
                <p class="import-info">âœ“ Jednoducho vloÅ¾te JSON sÃºbory do prieÄinka <code>testy/</code> a obnovte strÃ¡nku</p>

                <div id="existingTestsList" style="margin-top: 20px;">
                    <h4 style="margin-bottom: 10px; color: #2196F3;">ğŸ“š Testy v prieÄinku:</h4>
                    <div id="existingTestsContent" style="max-height: 300px; overflow-y: auto; border: 1px solid #ddd; border-radius: 8px; padding: 10px; background: #f9f9f9;">
                        <p style="color: #666; text-align: center;">NaÄÃ­tavam...</p>
                    </div>
                </div>

                <button onclick="showExample()" class="btn-info" style="margin-top: 15px;">ğŸ“– ZobraziÅ¥ prÃ­klad formÃ¡tu</button>
            </div>

            <div class="import-divider">ALEBO</div>

            <div class="import-section">
                <h3>ManuÃ¡lne nahranie sÃºboru</h3>
                <p class="import-info">Vyberte JSON sÃºbor z vÃ¡Å¡ho poÄÃ­taÄa</p>
                <input type="file" id="fileInput" accept=".json">
                <button onclick="importTests()">ğŸ“¤ NahraÅ¥ sÃºbor</button>
            </div>

            <div class="import-section danger-section">
                <h3>VymazaÅ¥ testy</h3>
                <button onclick="clearTests()" class="btn-danger">ğŸ—‘ï¸ VymazaÅ¥ vÅ¡etky testy</button>
            </div>

            <button onclick="backToList()" class="btn-secondary">â† SpÃ¤Å¥ na zoznam testov</button>
        </div>

        <!-- AI Import -->
        <div id="aiImportPage" style="display: none;">
            <h2>ğŸ¤– AI Import otÃ¡zok</h2>
            <p class="ai-import-subtitle">Nahrajte fotografiu otÃ¡zok a AI ich automaticky rozpoznÃ¡</p>

            <!-- Step 1: Upload fotky -->
            <div id="aiStep1" class="ai-step">
                <div class="ai-section">
                    <h3>1. Nahrajte fotografiu otÃ¡zok</h3>
                    <p class="ai-import-subtitle" style="font-size: 0.9em; color: #666;">ğŸ’¡ MÃ´Å¾ete nahraÅ¥ aj viac fotiek naraz</p>
                    <input type="file" id="aiImageInput" accept="image/*" multiple onchange="previewImages(this)">
                    <div id="imagePreview" style="display: none; margin-top: 20px;">
                        <div id="previewContainer" style="display: flex; gap: 10px; flex-wrap: wrap;"></div>
                    </div>

                    <div style="margin-top: 15px; padding: 10px; background: #f0f8ff; border-radius: 8px; border-left: 4px solid #2196F3;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="advancedPreprocessing" style="width: 18px; height: 18px; cursor: pointer;">
                            <div>
                                <strong style="color: #2196F3;">ğŸ”¬ PokroÄilÃ© predspracovanie obrÃ¡zka</strong>
                                <p style="margin: 5px 0 0 0; font-size: 0.85em; color: #666;">
                                    PouÅ¾ije CLAHE, denoising a adaptÃ­vny threshold pre lepÅ¡ie rozpoznÃ¡vanie (Äiernobiele, vysokÃ½ kontrast)
                                </p>
                            </div>
                        </label>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button onclick="processImagesWithAI()" id="processBtn" class="btn-primary" style="display: none;">
                            âœ¨ SpracovaÅ¥ s AI
                        </button>
                        <button onclick="cancelAIImport()" class="btn-danger" style="display: none;" id="cancelStep1Btn">
                            âŒ ZruÅ¡iÅ¥
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 2: AI Processing -->
            <div id="aiStep2" class="ai-step" style="display: none;">
                <div class="ai-processing">
                    <div class="spinner"></div>
                    <p id="aiProcessingMessage">AI analyzuje obrÃ¡zok...</p>
                    <p id="aiProcessingTime" class="ai-processing-detail" style="font-size: 0.9em; color: #666;"></p>
                    <button onclick="cancelAIImport()" class="btn-danger" style="margin-top: 20px;">
                        âŒ ZruÅ¡iÅ¥ spracovanie
                    </button>
                </div>
            </div>

            <!-- Step 3: NÃ¡hÄ¾ad a Ãºprava otÃ¡zok -->
            <div id="aiStep3" class="ai-step" style="display: none;">
                <div class="ai-section">
                    <h3>2. Skontrolujte a upravte otÃ¡zky</h3>

                    <!-- Zobrazenie predspracovanej fotky -->
                    <div id="originalImagesContainer" style="margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 8px;">
                        <h4 style="margin: 0 0 10px 0; color: #2196F3;">ğŸ”¬ PredspracovanÃ¡ fotka (Äo AI videlo)</h4>
                        <div id="originalImagesPreview" style="max-height: 500px; overflow-y: auto;"></div>
                    </div>

                    <div id="aiQuestionsPreview" class="ai-questions-container"></div>

                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button onclick="addNewQuestion()" class="btn-secondary">â• PridaÅ¥ otÃ¡zku</button>
                        <button onclick="cancelAIImport()" class="btn-danger">âŒ ZruÅ¡iÅ¥ import</button>
                    </div>
                </div>
            </div>

            <!-- Step 4: UloÅ¾enie -->
            <div id="aiStep4" class="ai-step" style="display: none;">
                <div class="ai-section">
                    <h3>3. UloÅ¾iÅ¥ test</h3>

                    <div class="save-mode-selector">
                        <label>
                            <input type="radio" name="saveMode" value="new" checked onchange="updateSaveMode()">
                            VytvoriÅ¥ novÃ½ test
                        </label>
                        <label>
                            <input type="radio" name="saveMode" value="append" onchange="updateSaveMode()">
                            PridaÅ¥ do existujÃºceho testu
                        </label>
                    </div>

                    <div id="newTestOptions" class="save-options">
                        <label>NÃ¡zov testu:</label>
                        <input type="text" id="aiTestTitle" class="ai-input" placeholder="NapÃ­Å¡te nÃ¡zov testu">

                        <label>Popis testu:</label>
                        <input type="text" id="aiTestDesc" class="ai-input" placeholder="VoliteÄ¾nÃ½ popis testu">

                        <label>NÃ¡zov sÃºboru (bez .json):</label>
                        <input type="text" id="newTestFileName" class="ai-input" placeholder="napr. Bio CAP 6">
                    </div>

                    <div id="appendTestOptions" class="save-options" style="display: none;">
                        <label>VybraÅ¥ existujÃºci test:</label>
                        <select id="existingTestSelect" class="ai-input"></select>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button onclick="saveAITest()" class="btn-success">ğŸ’¾ UloÅ¾iÅ¥ test</button>
                        <button onclick="cancelAIImport()" class="btn-danger">âŒ ZruÅ¡iÅ¥ import</button>
                    </div>
                </div>
            </div>

            <button onclick="backToList()" class="btn-secondary">â† SpÃ¤Å¥ na zoznam testov</button>
        </div>

        <!-- Edit Test Page -->
        <div id="editTestPage" style="display: none;">
            <h2>âœï¸ UpraviÅ¥ test</h2>

            <div class="ai-section">
                <h3>ZÃ¡kladnÃ© Ãºdaje</h3>
                <div class="ai-suggestions">
                    <div class="suggestion-row">
                        <label>NÃ¡zov testu:</label>
                        <input type="text" id="editTestTitle" class="ai-input" oninput="triggerAutosave()">
                    </div>
                    <div class="suggestion-row">
                        <label>Popis:</label>
                        <input type="text" id="editTestDesc" class="ai-input" oninput="triggerAutosave()">
                    </div>
                </div>

                <h3>OtÃ¡zky</h3>
                <div id="editQuestionsContainer" class="ai-questions-container"></div>

                <button onclick="addEditQuestion()" class="btn-secondary">â• PridaÅ¥ otÃ¡zku</button>
                <button onclick="saveEditedTest()" class="btn-success" style="margin-left: 10px;">ğŸ’¾ UloÅ¾iÅ¥ zmeny</button>
            </div>

            <button onclick="backToList()" class="btn-secondary">â† SpÃ¤Å¥ na zoznam testov</button>
        </div>

        <!-- PrÃ­klad formÃ¡tu -->
        <div id="examplePage" style="display: none;">
            <h2>ğŸ“– PrÃ­klad formÃ¡tu testov</h2>

            <div class="example-section">
                <h3>FormÃ¡t JSON sÃºboru</h3>
                <p class="example-info">Vytvorte JSON sÃºbor v prieÄinku <code>testy/</code> s nasledujÃºcim formÃ¡tom:</p>

                <div class="example-code">
                    <h4>JednoduchÃ½ prÃ­klad:</h4>
                    <pre><code>[
  {
    "title": "NÃ¡zov testu",
    "description": "Popis testu",
    "questions": [
      {
        "question": "OtÃ¡zka s jednou sprÃ¡vnou odpoveÄou?",
        "answers": [
          "OdpoveÄ 1",
          "OdpoveÄ 2",
          "OdpoveÄ 3",
          "OdpoveÄ 4"
        ],
        "correct": 0
      },
      {
        "question": "OtÃ¡zka s viacerÃ½mi sprÃ¡vnymi odpoveÄami?",
        "answers": [
          "OdpoveÄ A",
          "OdpoveÄ B",
          "OdpoveÄ C",
          "OdpoveÄ D"
        ],
        "correct": [0, 2]
      }
    ]
  }
]</code></pre>
                </div>

                <div class="example-notes">
                    <h4>DÃ´leÅ¾itÃ© pravidlÃ¡:</h4>
                    <ul>
                        <li><strong>correct:</strong> Index sprÃ¡vnej odpovede (0 = prvÃ¡, 1 = druhÃ¡, atÄ.)</li>
                        <li><strong>Jedna odpoveÄ:</strong> <code>"correct": 0</code> (ÄÃ­slo)</li>
                        <li><strong>Viac odpovedÃ­:</strong> <code>"correct": [0, 2]</code> (pole ÄÃ­sel)</li>
                        <li><strong>title a description:</strong> SÃº voliteÄ¾nÃ©</li>
                        <li><strong>MÃ´Å¾ete maÅ¥:</strong> Jeden test <code>{ ... }</code> alebo viacero testov <code>[ {...}, {...} ]</code></li>
                    </ul>
                </div>

                <div class="example-file">
                    <h4>Ako vytvoriÅ¥ sÃºbor:</h4>
                    <pre><code>1. Vytvorte sÃºbor: testy/moj_test.json
2. SkopÃ­rujte vyÅ¡Å¡ie uvedenÃ½ formÃ¡t
3. Upravte otÃ¡zky a odpovede
4. Obnovte strÃ¡nku - test sa automaticky naÄÃ­ta</code></pre>
                </div>
            </div>

            <button onclick="backToImport()" class="btn-secondary">â† SpÃ¤Å¥ na import</button>
        </div>

        <!-- Nastavenia testu -->
        <div id="testSettings" style="display: none;">
            <h2 id="settingsTitle"></h2>

            <div class="settings-group">
                <h3>ÄŒasovÃ½ limit</h3>
                <label>
                    <input type="radio" name="time" value="20" checked> 20 minÃºt
                </label>
                <label>
                    <input type="radio" name="time" value="30"> 30 minÃºt
                </label>
                <label>
                    <input type="radio" name="time" value="60"> 60 minÃºt
                </label>
                <label>
                    <input type="radio" name="time" value="0"> Bez ÄasovÃ©ho limitu
                </label>
            </div>

            <div class="settings-group">
                <h3>Rozsah otÃ¡zok</h3>
                <label>Od otÃ¡zky: <input type="number" id="questionFrom" value="1" min="1"></label>
                <label>Do otÃ¡zky: <input type="number" id="questionTo" value="999" min="1"></label>
            </div>

            <div class="settings-group">
                <h3>Poradie otÃ¡zok</h3>
                <label>
                    <input type="radio" name="shuffle" value="false" checked> Po poradÃ­
                </label>
                <label>
                    <input type="radio" name="shuffle" value="true"> ZamixovanÃ©
                </label>
            </div>

            <div class="settings-group">
                <h3>Zobrazenie sprÃ¡vnych odpovedÃ­</h3>
                <label>
                    <input type="radio" name="showAnswers" value="each" checked> Po kaÅ¾dej otÃ¡zke
                </label>
                <label>
                    <input type="radio" name="showAnswers" value="end"> Na konci testu
                </label>
                <label>
                    <input type="radio" name="showAnswers" value="retry"> OpakovaÅ¥ nesprÃ¡vne otÃ¡zky
                </label>
            </div>

            <button onclick="startTestWithSettings()">SpustiÅ¥ test</button>
            <button onclick="showLearnMode()" class="btn-learn">ReÅ¾im uÄenia</button>
            <button onclick="backToList()" class="btn-secondary">ZruÅ¡iÅ¥</button>
        </div>

        <!-- Test interface -->
        <div id="testInterface" style="display: none;">
            <div class="test-header">
                <h2 id="testTitle"></h2>
                <div id="timer" style="display: none;"></div>
            </div>
            <div id="questionContainer"></div>
            <div class="navigation">
                <button onclick="previousQuestion()" id="prevBtn">PredchÃ¡dzajÃºca</button>
                <span id="questionNumber"></span>
                <button onclick="nextQuestion()" id="nextBtn">ÄalÅ¡ia</button>
            </div>
            <button onclick="submitTest()" id="submitBtn" style="display: none;">OdovzdaÅ¥ test</button>
            <button onclick="backToList()" class="btn-secondary">SpÃ¤Å¥ na zoznam</button>
        </div>

        <!-- VÃ½sledky -->
        <div id="results" style="display: none;">
            <h2>VÃ½sledky testu</h2>
            <div id="resultsContainer"></div>
            <button onclick="backToList()">SpÃ¤Å¥ na zoznam</button>
        </div>

        <!-- ReÅ¾im uÄenia -->
        <div id="learnMode" style="display: none;">
            <h2 id="learnModeTitle"></h2>
            <p class="learn-mode-info">ReÅ¾im uÄenia - vÅ¡etky otÃ¡zky so sprÃ¡vnymi odpoveÄami</p>
            <div id="learnModeContainer"></div>
            <button onclick="backToList()">SpÃ¤Å¥ na zoznam</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}?v=1.3.18"></script>
</body>
</html>
