<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testovacia aplikÃ¡cia</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Testovacia aplikÃ¡cia</h1>

        <!-- Zoznam testov -->
        <div class="section">
            <div class="test-header-controls">
                <h2>DostupnÃ© testy</h2>
                <div>
                    <button onclick="showHelpPage()" class="btn-info btn-small">ğŸ“– NÃ¡vod</button>
                    <button onclick="showImportPage()" class="btn-import btn-small">ğŸ“ Import testov</button>
                    <button onclick="startMultipleTests()" class="btn-multi" id="startMultiBtn" style="display: none;">
                        SpustiÅ¥ vybranÃ© testy
                    </button>
                    <button onclick="clearStatistics()" class="btn-danger btn-small">VymazaÅ¥ Å¡tatistiky</button>
                </div>
            </div>
            <div id="testList"></div>
        </div>

        <!-- NÃ¡vod -->
        <div id="helpPage" style="display: none;">
            <h2>ğŸ“– NÃ¡vod na pouÅ¾itie</h2>

            <div class="help-section">
                <h3>NaÄÃ­tanie testov</h3>
                <p><strong>SpÃ´sob 1: AutomatickÃ© naÄÃ­tanie (odporÃºÄanÃ©)</strong></p>
                <ol>
                    <li>VloÅ¾te JSON sÃºbory s testami do prieÄinka <code>testy/</code></li>
                    <li>V aplikÃ¡cii kliknite na "ğŸ“ Import testov"</li>
                    <li>Kliknite na "ğŸ“‚ Automaticky naÄÃ­taÅ¥ vÅ¡etky testy"</li>
                </ol>

                <p><strong>SpÃ´sob 2: ManuÃ¡lne nahratie</strong></p>
                <ol>
                    <li>Kliknite na "ğŸ“ Import testov"</li>
                    <li>Vyberte JSON sÃºbor z vÃ¡Å¡ho poÄÃ­taÄa</li>
                    <li>Kliknite na "ğŸ“¤ NahraÅ¥ sÃºbor"</li>
                </ol>
            </div>

            <div class="help-section">
                <h3>Absolvovanie testu</h3>
                <ol>
                    <li>Vyberte test zo zoznamu (zobrazÃ­ sa dialÃ³g s nastaveniami)</li>
                    <li>Nastavte parametre:
                        <ul>
                            <li><strong>ÄŒasovÃ½ limit:</strong> 20/30/60 minÃºt alebo bez limitu</li>
                            <li><strong>Rozsah otÃ¡zok:</strong> Vyberte od-do ktorej otÃ¡zky chcete absolvovaÅ¥</li>
                            <li><strong>Poradie:</strong> Po poradÃ­ alebo zamixovanÃ©</li>
                            <li><strong>Zobrazenie odpovedÃ­:</strong> NezobrazovaÅ¥ / Po kaÅ¾dej otÃ¡zke / Na konci testu</li>
                        </ul>
                    </li>
                    <li>Kliknite na "SpustiÅ¥ test" alebo "ReÅ¾im uÄenia"</li>
                    <li>Absolvujte test a pozrite si vÃ½sledky</li>
                </ol>
            </div>

            <div class="help-section">
                <h3>ÄalÅ¡ie funkcie</h3>
                <ul>
                    <li><strong>Viacero testov naraz:</strong> ZaÅ¡krtnite checkboxy pri testoch a kliknite "SpustiÅ¥ vybranÃ© testy"</li>
                    <li><strong>Å tatistiky:</strong> Pri kaÅ¾dom teste sa zobrazujÃº (poÄet absolvovanÃ­, poslednÃ½ vÃ½sledok, priemer)</li>
                    <li><strong>ReÅ¾im uÄenia:</strong> ZobrazÃ­ celÃ½ test so sprÃ¡vnymi odpoveÄami - vhodnÃ© na uÄenie</li>
                    <li><strong>Zobrazenie po kaÅ¾dej otÃ¡zke:</strong> IhneÄ po odpovedi uvidÃ­te sprÃ¡vne/nesprÃ¡vne odpovede</li>
                    <li><strong>Zobrazenie na konci:</strong> Po skonÄenÃ­ testu uvidÃ­te vÅ¡etky sprÃ¡vne odpovede</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>FormÃ¡t JSON sÃºboru</h3>
                <p>Pre vytvorenie vlastnÃ½ch testov pouÅ¾ite tento formÃ¡t:</p>
                <pre><code>[
  {
    "title": "NÃ¡zov testu",
    "description": "Popis testu",
    "questions": [
      {
        "question": "OtÃ¡zka s jednou sprÃ¡vnou odpoveÄou?",
        "answers": ["OdpoveÄ 1", "OdpoveÄ 2", "OdpoveÄ 3"],
        "correct": 0
      },
      {
        "question": "OtÃ¡zka s viacerÃ½mi sprÃ¡vnymi odpoveÄami?",
        "answers": ["OdpoveÄ A", "OdpoveÄ B", "OdpoveÄ C"],
        "correct": [0, 2]
      }
    ]
  }
]</code></pre>
                <p><strong>PravidlÃ¡:</strong></p>
                <ul>
                    <li><code>correct</code> mÃ´Å¾e byÅ¥ jedno ÄÃ­slo (jedna sprÃ¡vna) alebo pole ÄÃ­sel (viac sprÃ¡vnych)</li>
                    <li>Index zaÄÃ­na od 0 (0 = prvÃ¡ odpoveÄ, 1 = druhÃ¡, atÄ.)</li>
                    <li>Pri viacerÃ½ch sprÃ¡vnych musÃ­te vybraÅ¥ vÅ¡etky</li>
                </ul>
            </div>

            <button onclick="backToList()" class="btn-secondary">â† SpÃ¤Å¥ na zoznam testov</button>
        </div>

        <!-- Import testov -->
        <div id="importPage" style="display: none;">
            <h2>Import testov</h2>

            <div class="import-section">
                <h3>AutomatickÃ© naÄÃ­tanie z prieÄinka <code>testy/</code></h3>
                <p class="import-info">NaÄÃ­ta vÅ¡etky JSON sÃºbory z prieÄinka <code>testy/</code> v projektovom prieÄinku</p>
                <div id="filesList" class="files-list"></div>
                <button onclick="loadFromFolder()" class="btn-auto">ğŸ“‚ Automaticky naÄÃ­taÅ¥ vÅ¡etky testy</button>
                <button onclick="showExample()" class="btn-info">ğŸ“– ZobraziÅ¥ prÃ­klad formÃ¡tu</button>
            </div>

            <div class="import-divider">ALEBO</div>

            <div class="import-section">
                <h3>ManuÃ¡lne nahranie sÃºboru</h3>
                <p class="import-info">Vyberte JSON sÃºbor z vÃ¡Å¡ho poÄÃ­taÄa</p>
                <input type="file" id="fileInput" accept=".json">
                <button onclick="importTests()">ğŸ“¤ NahraÅ¥ sÃºbor</button>
            </div>

            <div class="import-section danger-section">
                <h3>VymazaÅ¥ testy</h3>
                <button onclick="clearTests()" class="btn-danger">ğŸ—‘ï¸ VymazaÅ¥ vÅ¡etky testy</button>
            </div>

            <button onclick="backToList()" class="btn-secondary">â† SpÃ¤Å¥ na zoznam testov</button>
        </div>

        <!-- PrÃ­klad formÃ¡tu -->
        <div id="examplePage" style="display: none;">
            <h2>ğŸ“– PrÃ­klad formÃ¡tu testov</h2>

            <div class="example-section">
                <h3>FormÃ¡t JSON sÃºboru</h3>
                <p class="example-info">Vytvorte JSON sÃºbor v prieÄinku <code>testy/</code> s nasledujÃºcim formÃ¡tom:</p>

                <div class="example-code">
                    <h4>JednoduchÃ½ prÃ­klad:</h4>
                    <pre><code>[
  {
    "title": "NÃ¡zov testu",
    "description": "Popis testu",
    "questions": [
      {
        "question": "OtÃ¡zka s jednou sprÃ¡vnou odpoveÄou?",
        "answers": [
          "OdpoveÄ 1",
          "OdpoveÄ 2",
          "OdpoveÄ 3",
          "OdpoveÄ 4"
        ],
        "correct": 0
      },
      {
        "question": "OtÃ¡zka s viacerÃ½mi sprÃ¡vnymi odpoveÄami?",
        "answers": [
          "OdpoveÄ A",
          "OdpoveÄ B",
          "OdpoveÄ C",
          "OdpoveÄ D"
        ],
        "correct": [0, 2]
      }
    ]
  }
]</code></pre>
                </div>

                <div class="example-notes">
                    <h4>DÃ´leÅ¾itÃ© pravidlÃ¡:</h4>
                    <ul>
                        <li><strong>correct:</strong> Index sprÃ¡vnej odpovede (0 = prvÃ¡, 1 = druhÃ¡, atÄ.)</li>
                        <li><strong>Jedna odpoveÄ:</strong> <code>"correct": 0</code> (ÄÃ­slo)</li>
                        <li><strong>Viac odpovedÃ­:</strong> <code>"correct": [0, 2]</code> (pole ÄÃ­sel)</li>
                        <li><strong>title a description:</strong> SÃº voliteÄ¾nÃ©</li>
                        <li><strong>MÃ´Å¾ete maÅ¥:</strong> Jeden test <code>{ ... }</code> alebo viacero testov <code>[ {...}, {...} ]</code></li>
                    </ul>
                </div>

                <div class="example-file">
                    <h4>Ako vytvoriÅ¥ sÃºbor:</h4>
                    <pre><code>1. Vytvorte sÃºbor: testy/moj_test.json
2. SkopÃ­rujte vyÅ¡Å¡ie uvedenÃ½ formÃ¡t
3. Upravte otÃ¡zky a odpovede
4. Kliknite "Automaticky naÄÃ­taÅ¥" v aplikÃ¡cii</code></pre>
                </div>
            </div>

            <button onclick="backToImport()" class="btn-secondary">â† SpÃ¤Å¥ na import</button>
        </div>

        <!-- Nastavenia testu -->
        <div id="testSettings" style="display: none;">
            <h2 id="settingsTitle"></h2>

            <div class="settings-group">
                <h3>ÄŒasovÃ½ limit</h3>
                <label>
                    <input type="radio" name="time" value="20" checked> 20 minÃºt
                </label>
                <label>
                    <input type="radio" name="time" value="30"> 30 minÃºt
                </label>
                <label>
                    <input type="radio" name="time" value="60"> 60 minÃºt
                </label>
                <label>
                    <input type="radio" name="time" value="0"> Bez ÄasovÃ©ho limitu
                </label>
            </div>

            <div class="settings-group">
                <h3>Rozsah otÃ¡zok</h3>
                <label>Od otÃ¡zky: <input type="number" id="questionFrom" value="1" min="1"></label>
                <label>Do otÃ¡zky: <input type="number" id="questionTo" value="999" min="1"></label>
            </div>

            <div class="settings-group">
                <h3>Poradie otÃ¡zok</h3>
                <label>
                    <input type="radio" name="shuffle" value="false" checked> Po poradÃ­
                </label>
                <label>
                    <input type="radio" name="shuffle" value="true"> ZamixovanÃ©
                </label>
            </div>

            <div class="settings-group">
                <h3>Zobrazenie sprÃ¡vnych odpovedÃ­</h3>
                <label>
                    <input type="radio" name="showAnswers" value="none" checked> NezobrazovaÅ¥
                </label>
                <label>
                    <input type="radio" name="showAnswers" value="each"> Po kaÅ¾dej otÃ¡zke
                </label>
                <label>
                    <input type="radio" name="showAnswers" value="end"> Na konci testu
                </label>
            </div>

            <button onclick="startTestWithSettings()">SpustiÅ¥ test</button>
            <button onclick="showLearnMode()" class="btn-learn">ReÅ¾im uÄenia</button>
            <button onclick="backToList()" class="btn-secondary">ZruÅ¡iÅ¥</button>
        </div>

        <!-- Test interface -->
        <div id="testInterface" style="display: none;">
            <div class="test-header">
                <h2 id="testTitle"></h2>
                <div id="timer" style="display: none;"></div>
            </div>
            <div id="questionContainer"></div>
            <div class="navigation">
                <button onclick="previousQuestion()" id="prevBtn">PredchÃ¡dzajÃºca</button>
                <span id="questionNumber"></span>
                <button onclick="nextQuestion()" id="nextBtn">ÄalÅ¡ia</button>
            </div>
            <button onclick="submitTest()" id="submitBtn" style="display: none;">OdovzdaÅ¥ test</button>
            <button onclick="backToList()" class="btn-secondary">SpÃ¤Å¥ na zoznam</button>
        </div>

        <!-- VÃ½sledky -->
        <div id="results" style="display: none;">
            <h2>VÃ½sledky testu</h2>
            <div id="resultsContainer"></div>
            <button onclick="backToList()">SpÃ¤Å¥ na zoznam</button>
        </div>

        <!-- ReÅ¾im uÄenia -->
        <div id="learnMode" style="display: none;">
            <h2 id="learnModeTitle"></h2>
            <p class="learn-mode-info">ReÅ¾im uÄenia - vÅ¡etky otÃ¡zky so sprÃ¡vnymi odpoveÄami</p>
            <div id="learnModeContainer"></div>
            <button onclick="backToList()">SpÃ¤Å¥ na zoznam</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
